<!--
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate and Download Table</title>
</head>
<body>

<h2>Generate and Download Table</h2>

<form id="tableForm">
  <label for="rows">Number of Rows:</label>
  <input type="number" id="rows" name="rows" min="1" value="1"><br><br>
  <label for="cols">Number of Columns:</label>
  <input type="number" id="cols" name="cols" min="1" value="1"><br><br>
  <button type="button" onclick="generateTable()">Generate Table</button>
</form>

<div id="tableContainer"></div>

<script>
function generateTable() {
  var rows = document.getElementById("rows").value;
  var cols = document.getElementById("cols").value;
  
  var table = "<table border='1'>";
  for (var i = 0; i < rows; i++) {
    table += "<tr>";
    for (var j = 0; j < cols; j++) {
      table += "<td>Row "+"測試" + (i + 1) + ", Col " + (j + 1) + "</td>";
    }
    table += "</tr>";
  }
  table += "</table>";
  
  document.getElementById("tableContainer").innerHTML = table;
}

function downloadTable() {
  var tableHtml = document.getElementById("tableContainer").innerHTML;
  var blob = new Blob([tableHtml], { type: "text/html" });
  var url = URL.createObjectURL(blob);
  
  var a = document.createElement("a");
  a.href = url;
  a.download = "table.html";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>

<button onclick="downloadTable()">Download Table</button>

</body>
</html>
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate and Send Table</title>
</head>
<body>

<h2>Generate and Send Table</h2>

<form id="tableForm">
  <label for="rows">Number of Rows:</label>
  <input type="number" id="rows" name="rows" min="1" value="1"><br><br>
  <label for="cols">Number of Columns:</label>
  <input type="number" id="cols" name="cols" min="1" value="1"><br><br>
  <button type="button" onclick="generateTable()">Generate Table</button>
</form>

<div id="tableContainer"></div>

<script>
function generateTable() {
  var rows = document.getElementById("rows").value;
  var cols = document.getElementById("cols").value;
  
  var table = "<table border='1'>";
  for (var i = 0; i < rows; i++) {
    table += "<tr>";
    for (var j = 0; j < cols; j++) {
      table += "<td>Row "+"測試" + (i + 1) + ", Col " + (j + 1) + "</td>";
    }
    table += "</tr>";
  }
  table += "</table>";
  
  document.getElementById("tableContainer").innerHTML = table;
}

function sendTable() {
  var tableData = [];
  var rows = document.getElementById("rows").value;
  var cols = document.getElementById("cols").value;
  
  for (var i = 0; i < rows; i++) {
    var rowData = [];
    for (var j = 0; j < cols; j++) {
      rowData.push("Row "+"測試" + (i + 1) + ", Col " + (j + 1));
    }
    tableData.push(rowData);
  }
  
  // 發送表格數據到後端
  fetch('/savetable', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ pdfData: tableData })
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Failed to send table data.');
    }
    return response.json();
  })
  .then(data => {
    console.log(data.message); // 顯示成功消息
  })
  .catch(error => {
    console.error(error);
    alert('Failed to send table data.');
  });
}
</script>

<button onclick="sendTable()">Send Table Data</button>

</body>
</html>
